
var CONSTELACOES = {
Sagittarius : {
		Estrela0  : {constel: "Sag", numero :  0, declinacao : 1.5*  76, ascencaoReta : 1.5*  12, brilho : 1, ligadaCom :  1, cor : 0},
		Estrela1  : {constel: "Sag", numero :  1, declinacao : 1.5*  84, ascencaoReta : 1.5*  26, brilho : 3, ligadaCom :  2, cor : 0},
		Estrela2  : {constel: "Sag", numero :  2, declinacao : 1.5*  88, ascencaoReta : 1.5*  62, brilho : 2, ligadaCom :  3, cor : 0},
		Estrela3  : {constel: "Sag", numero :  3, declinacao : 1.5*  82, ascencaoReta : 1.5*  44, brilho : 2, ligadaCom :  4, cor : 0},
		Estrela4  : {constel: "Sag", numero :  4, declinacao : 1.5*  36, ascencaoReta : 1.5*  61, brilho : 2, ligadaCom :  5, cor : 0},
		Estrela5  : {constel: "Sag", numero :  5, declinacao : 1.5*  37, ascencaoReta : 1.5*  89, brilho : 2, ligadaCom :  6, cor : 0},
		Estrela6  : {constel: "Sag", numero :  6, declinacao : 1.5*  39, ascencaoReta : 1.5*  90, brilho : 2, ligadaCom :  7, cor : 0},
		Estrela7  : {constel: "Sag", numero :  7, declinacao : 1.5*  44, ascencaoReta : 1.5* 128, brilho : 2, ligadaCom :  8, cor : 0},
		Estrela8  : {constel: "Sag", numero :  8, declinacao : 1.5*  73, ascencaoReta : 1.5* 124, brilho : 2, ligadaCom : -1, cor : 0},
		Estrela9  : {constel: "Sag", numero :  9, declinacao : 1.5*  75, ascencaoReta : 1.5* 137, brilho : 2, ligadaCom :  8, cor : 0},
		Estrela10 : {constel: "Sag", numero : 10, declinacao : 1.5*  74, ascencaoReta : 1.5* 141, brilho : 2, ligadaCom : -1, cor : 0},
		Estrela11 : {constel: "Sag", numero : 11, declinacao : 1.5*  99, ascencaoReta : 1.5*  52, brilho : 1, ligadaCom :  2, cor : 0},
		Estrela12 : {constel: "Sag", numero : 12, declinacao : 1.5* 110, ascencaoReta : 1.5*  56, brilho : 4, ligadaCom : 13, cor : 0},		
		Estrela13 : {constel: "Sag", numero : 13, declinacao : 1.5*  94, ascencaoReta : 1.5*  70, brilho : 4, ligadaCom :  2, cor : 0},
		Estrela14 : {constel: "Sag", numero : 14, declinacao : 1.5* 138, ascencaoReta : 1.5*  35, brilho : 1, ligadaCom : 15, cor : 0},
		Estrela15 : {constel: "Sag", numero : 15, declinacao : 1.5* 127, ascencaoReta : 1.5*  48, brilho : 4, ligadaCom : 12, cor : 0},		// kaus borealis
		Estrela16 : {constel: "Sag", numero : 16, declinacao : 1.5* 150, ascencaoReta : 1.5*  73, brilho : 4, ligadaCom : 17, cor : 0},		// nash
		Estrela17 : {constel: "Sag", numero : 17, declinacao : 1.5* 136, ascencaoReta : 1.5*  68, brilho : 4, ligadaCom : 15, cor : 0},
		Estrela18 : {constel: "Sag", numero : 18, declinacao : 1.5* 137, ascencaoReta : 1.5* 102, brilho : 2, ligadaCom : 19, cor : 0},
		Estrela19 : {constel: "Sag", numero : 19, declinacao : 1.5* 128, ascencaoReta : 1.5*  90, brilho : 5, ligadaCom : 17, cor : 0},            // kaus australis
		OffsetX : -28*1.6,
		OffsetY : 20*1.5,
		ConnectedStars : 18
	},
	
	Scorpion : {
		Estrela0  : {constel: "Sco", numero :  0, declinacao : 1.5*   5, ascencaoReta : 1.5* 111, brilho : 3, ligadaCom :  1, cor : 0},
		Estrela1  : {constel: "Sco", numero :  1, declinacao : 1.5*  23, ascencaoReta : 1.5* 110, brilho : 5, ligadaCom :  2, cor : 0},
		Estrela2  : {constel: "Sco", numero :  2, declinacao : 1.5*  15, ascencaoReta : 1.5* 121, brilho : 3, ligadaCom :  3, cor : 0},
		Estrela3  : {constel: "Sco", numero :  3, declinacao : 1.5*  11, ascencaoReta : 1.5* 128, brilho : 3, ligadaCom :  4, cor : 0},
		Estrela4  : {constel: "Sco", numero :  4, declinacao : 1.5*  23, ascencaoReta : 1.5* 143, brilho : 4, ligadaCom :  5, cor : 0},
		Estrela5  : {constel: "Sco", numero :  5, declinacao : 1.5*  50, ascencaoReta : 1.5* 142, brilho : 2, ligadaCom :  6, cor : 0},
		Estrela6  : {constel: "Sco", numero :  6, declinacao : 1.5*  68, ascencaoReta : 1.5* 136, brilho : 2, ligadaCom :  7, cor : 0},
		Estrela7  : {constel: "Sco", numero :  7, declinacao : 1.5*  70, ascencaoReta : 1.5* 112, brilho : 3, ligadaCom :  8, cor : 0},
		Estrela8  : {constel: "Sco", numero :  8, declinacao : 1.5*  72, ascencaoReta : 1.5*  91, brilho : 5, ligadaCom :  9, cor : 0},
		Estrela9  : {constel: "Sco", numero :  9, declinacao : 1.5*  89, ascencaoReta : 1.5*  57, brilho : 3, ligadaCom : 10, cor : 0},
		Estrela10 : {constel: "Sco", numero : 10, declinacao : 1.5*  98, ascencaoReta : 1.5*  47, brilho : 6, ligadaCom : 11, cor : 0},		// Antares		
		Estrela11 : {constel: "Sco", numero : 11, declinacao : 1.5* 109, ascencaoReta : 1.5*  43, brilho : 3, ligadaCom : 12, cor : 0},
		Estrela12 : {constel: "Sco", numero : 12, declinacao : 1.5* 131, ascencaoReta : 1.5*  14, brilho : 3, ligadaCom : -1, cor : 0},
		Estrela13 : {constel: "Sco", numero : 13, declinacao : 1.5* 137, ascencaoReta : 1.5*  37, brilho : 3, ligadaCom : 11, cor : 0},	    
		Estrela14 : {constel: "Sco", numero : 14, declinacao : 1.5* 136, ascencaoReta : 1.5*  64, brilho : 3, ligadaCom : 11, cor : 0},	    
		Estrela15 : {constel: "Sco", numero : 15, declinacao : 1.5* 123, ascencaoReta : 1.5*  11, brilho : 2, ligadaCom : -1, cor : 0},
		Estrela16 : {constel: "Sco", numero : 16, declinacao : 1.5* 142, ascencaoReta : 1.5*  83, brilho : 2, ligadaCom : -1, cor : 0},	   
		OffsetX : 122*1.6,
		OffsetY :  20*1.5,
		ConnectedStars : 15
	},
	
	MiniScorpion : {
		Estrela0  : {constel: "Sco", numero :  0, declinacao : 1.0*   5, ascencaoReta : 1.0* 111, brilho : 3, ligadaCom :  1, cor : 0},
		Estrela1  : {constel: "Sco", numero :  1, declinacao : 1.0*  23, ascencaoReta : 1.0* 110, brilho : 5, ligadaCom :  2, cor : 0},
		Estrela2  : {constel: "Sco", numero :  2, declinacao : 1.0*  15, ascencaoReta : 1.0* 121, brilho : 3, ligadaCom :  3, cor : 0},
		Estrela3  : {constel: "Sco", numero :  3, declinacao : 1.0*  11, ascencaoReta : 1.0* 128, brilho : 3, ligadaCom :  4, cor : 0},
		Estrela4  : {constel: "Sco", numero :  4, declinacao : 1.0*  23, ascencaoReta : 1.0* 143, brilho : 4, ligadaCom :  5, cor : 0},
		Estrela5  : {constel: "Sco", numero :  5, declinacao : 1.0*  50, ascencaoReta : 1.0* 142, brilho : 2, ligadaCom :  6, cor : 0},
		Estrela6  : {constel: "Sco", numero :  6, declinacao : 1.0*  68, ascencaoReta : 1.0* 136, brilho : 2, ligadaCom :  7, cor : 0},
		Estrela7  : {constel: "Sco", numero :  7, declinacao : 1.0*  70, ascencaoReta : 1.0* 112, brilho : 3, ligadaCom :  8, cor : 0},
		Estrela8  : {constel: "Sco", numero :  8, declinacao : 1.0*  72, ascencaoReta : 1.0*  91, brilho : 5, ligadaCom :  9, cor : 0},
		Estrela9  : {constel: "Sco", numero :  9, declinacao : 1.0*  89, ascencaoReta : 1.0*  57, brilho : 3, ligadaCom : 10, cor : 0},
		Estrela10 : {constel: "Sco", numero : 10, declinacao : 1.0*  98, ascencaoReta : 1.0*  47, brilho : 6, ligadaCom : 11, cor : 0},		// Antares		
		Estrela11 : {constel: "Sco", numero : 11, declinacao : 1.0* 109, ascencaoReta : 1.0*  43, brilho : 3, ligadaCom : 12, cor : 0},
		Estrela12 : {constel: "Sco", numero : 12, declinacao : 1.0* 131, ascencaoReta : 1.0*  14, brilho : 3, ligadaCom : -1, cor : 0},
		Estrela13 : {constel: "Sco", numero : 13, declinacao : 1.0* 137, ascencaoReta : 1.0*  37, brilho : 3, ligadaCom : 11, cor : 0},	    
		Estrela14 : {constel: "Sco", numero : 14, declinacao : 1.0* 136, ascencaoReta : 1.0*  64, brilho : 3, ligadaCom : 11, cor : 0},	    
		Estrela15 : {constel: "Sco", numero : 15, declinacao : 1.0* 123, ascencaoReta : 1.0*  11, brilho : 2, ligadaCom : -1, cor : 0},
		Estrela16 : {constel: "Sco", numero : 16, declinacao : 1.0* 142, ascencaoReta : 1.0*  83, brilho : 2, ligadaCom : -1, cor : 0},	   
        OffsetX : 635,
        OffsetY : 430,
        ConnectedStars : 15
    },
	
	Lupus : {
	    Estrela0  : {constel: "Lup", numero :  0, declinacao : 1.5* 118, ascencaoReta : 1.5*  72, brilho : 1, ligadaCom :  1, cor : 0},
        Estrela1  : {constel: "Lup", numero :  1, declinacao : 1.5* 100, ascencaoReta : 1.5*  83, brilho : 1, ligadaCom :  2, cor : 0},
        Estrela2  : {constel: "Lup", numero :  2, declinacao : 1.5* 105, ascencaoReta : 1.5*  92, brilho : 1, ligadaCom :  3, cor : 0},
        Estrela3  : {constel: "Lup", numero :  3, declinacao : 1.5* 123, ascencaoReta : 1.5* 109, brilho : 2, ligadaCom :  4, cor : 0},
        Estrela4  : {constel: "Lup", numero :  4, declinacao : 1.5* 120, ascencaoReta : 1.5* 114, brilho : 1, ligadaCom :  5, cor : 0},
        Estrela5  : {constel: "Lup", numero :  5, declinacao : 1.5* 126, ascencaoReta : 1.5* 162, brilho : 2, ligadaCom :  7, cor : 0},
        Estrela6  : {constel: "Lup", numero :  6, declinacao : 1.5* 153, ascencaoReta : 1.5* 161, brilho : 1, ligadaCom :  5, cor : 0},
        Estrela7  : {constel: "Lup", numero :  7, declinacao : 1.5* 155, ascencaoReta : 1.5* 150, brilho : 3, ligadaCom :  8, cor : 0},
        Estrela8  : {constel: "Lup", numero :  8, declinacao : 1.5* 150, ascencaoReta : 1.5* 127, brilho : 3, ligadaCom :  9, cor : 0},
        Estrela9  : {constel: "Lup", numero :  9, declinacao : 1.5* 171, ascencaoReta : 1.5* 147, brilho : 1, ligadaCom :  8, cor : 0},
        Estrela10 : {constel: "Lup", numero : 10, declinacao : 1.5* 136, ascencaoReta : 1.5* 110, brilho : 2, ligadaCom :  3, cor : 0},
        Estrela11 : {constel: "Lup", numero : 11, declinacao : 1.5* 141, ascencaoReta : 1.5*  91, brilho : 2, ligadaCom : 10, cor : 0},
        OffsetX : 140*1.7,
        OffsetY : 045*1.5,
        ConnectedStars : 10
	},
	
	Centaurus : {
	    Estrela0  : {constel: "Cen", numero :  0, declinacao : 1.5*   3, ascencaoReta : 1.5*  44, brilho : 2, ligadaCom :  1, cor : 0},
        Estrela1  : {constel: "Cen", numero :  1, declinacao : 1.5*  25, ascencaoReta : 1.5*  40, brilho : 2, ligadaCom :  2, cor : 0},
        Estrela2  : {constel: "Cen", numero :  2, declinacao : 1.5*  59, ascencaoReta : 1.5*   4, brilho : 3, ligadaCom :  3, cor : 0},
        Estrela3  : {constel: "Cen", numero :  3, declinacao : 1.5*  72, ascencaoReta : 1.5*  36, brilho : 3, ligadaCom :  4, cor : 0},
        Estrela4  : {constel: "Cen", numero :  4, declinacao : 1.5* 103, ascencaoReta : 1.5*   4, brilho : 2, ligadaCom :  3, cor : 0},
		Estrela5  : {constel: "Cen", numero :  5, declinacao : 1.5*  43, ascencaoReta : 1.5* 139, brilho : 6, ligadaCom :  6, cor : 0},
        Estrela6  : {constel: "Cen", numero :  6, declinacao : 1.5*  67, ascencaoReta : 1.5* 132, brilho : 4, ligadaCom :  5, cor : 0},
        Estrela7  : {constel: "Cen", numero :  7, declinacao : 1.5*  83, ascencaoReta : 1.5*  95, brilho : 4, ligadaCom :  8, cor : 0},
        Estrela8  : {constel: "Cen", numero :  8, declinacao : 1.5*  68, ascencaoReta : 1.5*  62, brilho : 4, ligadaCom :  4, cor : 0},
        Estrela9  : {constel: "Cen", numero :  9, declinacao : 1.5* 158, ascencaoReta : 1.5* 150, brilho : 2, ligadaCom : 10, cor : 0},
        Estrela10 : {constel: "Cen", numero : 10, declinacao : 1.5* 160, ascencaoReta : 1.5*  91, brilho : 3, ligadaCom : 11, cor : 0},
        Estrela11 : {constel: "Cen", numero : 11, declinacao : 1.5* 133, ascencaoReta : 1.5*  80, brilho : 3, ligadaCom :  7, cor : 0},
        OffsetX : 287*1.8,
        OffsetY :  60*1.5,
        ConnectedStars : 12
	},
	
	Crux : {
        Estrela0  : {constel: "Cru", numero :  0, declinacao : 1.5*  23, ascencaoReta : 1.5*  44, brilho : 5, ligadaCom :  1, cor : 0},
        Estrela1  : {constel: "Cru", numero :  1, declinacao : 1.5*  22, ascencaoReta : 1.5*   4, brilho : 4, ligadaCom : -1, cor : 0},
        Estrela2  : {constel: "Cru", numero :  2, declinacao : 1.5*   3, ascencaoReta : 1.5*  21, brilho : 3, ligadaCom :  3, cor : 0},
        Estrela3  : {constel: "Cru", numero :  3, declinacao : 1.5*  38, ascencaoReta : 1.5*  16, brilho : 3, ligadaCom : -1, cor : 0},
        Estrela4  : {constel: "Cru", numero :  4, declinacao : 1.5*  29, ascencaoReta : 1.5*  30, brilho : 2, ligadaCom : -1, cor : 0},
        OffsetX : 390*1.7,
        OffsetY : 165*1.5,
        ConnectedStars : 2
	}
};

var currentName = "";
var currentStars = [];
var allStars = [];
var game;
var estrelaAtual = "";
var estrelaAnterior = "";

var img_estrela01;
var img_estrela02;
var img_estrela03; 
var img_estrela04; 
var img_estrela05; 
var img_estrela06; 

var sound_estrela;

var scene;
var iPadOk = false;
    


function constellations(){
	currentName = "";
	currentStars = [];
	estrelaAnterior = "";
    estrelaAtual = "";	        
}

function setScene(scene){
    this.scene = scene;
}

function setGameVar(game){
    this.game = game;
    
    img_estrela01 = game.assets['imagens/stars/estrela1.png'];  
    img_estrela02 = game.assets['imagens/stars/estrela2.png'];  
    img_estrela03 = game.assets['imagens/stars/estrela3.png'];  
    img_estrela04 = game.assets['imagens/stars/estrela4.png'];  
    img_estrela05 = game.assets['imagens/stars/estrela5.png'];  
    img_estrela06 = game.assets['imagens/stars/estrela6.png'];  
	sound_estrela = game.assets['sons/randomico/estrela1.wav'];
}

function checkPad(check){
    this.iPadOk = check;
}

function ligar(atual, anterior)
{
  //console.log("Atual = "+atual.nome+"  x = "+atual.x+" y = "+atual.y);
  //console.log("Anter = "+anterior.nome+"  x = "+anterior.x+" y = "+anterior.y);
  
  var xCentroAtual, xCentroAnterior, yCentroAtual, yCentroAnterior;
  
  // determina a coordenada (x, y) central dos retângulos dos sprite das estrelas atual e anterior
  xCentroAtual = Math.floor(atual.x + atual.image.width/4);   // divide por 4 porque há 2 frames na largura da imagem da estrela
  yCentroAtual = Math.floor(atual.y + atual.image.height/2);

  xCentroAnterior = Math.floor(anterior.x + anterior.image.width/4);
  yCentroAnterior = Math.floor(anterior.y + anterior.image.height/2);

  //console.log("Atual = "+atual.nome+" Centro x = "+xCentroAtual+" y = "+yCentroAtual);
  //console.log("Anter = "+anterior.nome+" Centro x = "+xCentroAnterior+" y = "+yCentroAnterior);


  var xImagem = 0;
  var yImagem = 0;
  var dx = xCentroAtual - xCentroAnterior;
  var dy = yCentroAtual - yCentroAnterior;
  
  var larguraImagem = Math.abs(dx)+1;
  var alturaImagem = Math.abs(dy)+1;

  if (xCentroAtual < xCentroAnterior)
     xImagem = xCentroAtual;
  else
     xImagem = xCentroAnterior;
	 
  if (yCentroAtual < yCentroAnterior)
     yImagem = yCentroAtual;
  else
     yImagem = yCentroAnterior;

    // Creates Sprite that displays a line
  var linha = new Sprite(larguraImagem, alturaImagem);
  var surface = new Surface(larguraImagem, alturaImagem);
  surface.context.beginPath();
  //console.log("xImagem = "+xImagem+" , yImagem = "+yImagem);
  //console.log("reta na origem de ("+(xCentroAtual - xImagem)+", "+ (yCentroAtual -yImagem)+") a ("+  
                      //(xCentroAnterior - xImagem)+", "+(yCentroAnterior - yImagem)+")" );
  Bresenham1(surface, xCentroAtual - xImagem, yCentroAtual - yImagem,  
                      xCentroAnterior - xImagem,  yCentroAnterior - yImagem);  					

  surface.context.fill();
  linha.image = surface;
 
  //console.log(xImagem+" "+yImagem);
  //console.log(dx+" "+dy);
  
  linha.x = xImagem;
  linha.y = yImagem;
  
  //scene.addChild(linha);
  scene.insertBefore(linha,anterior);
}

// algoritmo de Bresenham para desenho de linhas, adaptado a partir de
// http://www.sanfoundry.com/java-program-bresenham-line-algorithm/
function Bresenham1(surf, x0,  y0,  x1,  y1)
{
        var dx = Math.abs(x1 - x0);
        var dy = Math.abs(y1 - y0);
 
        var sx = x0 < x1 ? 1 : -1; 
        var sy = y0 < y1 ? 1 : -1; 
 
        var err = dx-dy;
        var e2;
 
        while (true) 
        {
			surf.setPixel(x0, y0, 0, 255, 0, 255);
            if (x0 == x1 && y0 == y1) 
                break;
 
            e2 = 2 * err;
            if (e2 > -dy) 
            {
                err = err - dy;
                x0 = x0 + sx;
            }
 
            if (e2 < dx) 
            {
                err = err + dx;
                y0 = y0 + sy;
            }
        } 
}

function createConstellation(nome){	
	var aux = 'CONSTELACOES.'+nome+".Estrela";
	var minimap = false;
	
	switch(nome){
		case "Sagittarius":
			var constel = CONSTELACOES.Sagittarius;						
		break;
		
		case "Scorpion":
			var constel = CONSTELACOES.Scorpion;
		break;
		
		case "MiniScorpion":
            var constel = CONSTELACOES.MiniScorpion;
            minimap = true;
        break;

		case "Lupus":
			var constel = CONSTELACOES.Lupus;
		break;
		
		case "Centaurus":
			var constel = CONSTELACOES.Centaurus;
		break;
		
		case "Crux":
			var constel = CONSTELACOES.Crux;
		break;
		
	}
	
	var offSetX = constel.OffsetX;
    var offSetY = constel.OffsetY;
	
	for(var i=0; i < Object.keys(constel).length - 3; i++){      
        var tempStar = new Estrela();
        preencheEstrela(tempStar, i, eval(aux+i+".declinacao"), eval(aux+i+".ascencaoReta"), eval(aux+i+".brilho"), eval(aux+i+".ligadaCom"), eval(aux+i+".cor"));
        
		var umaEstrela = new Sprite(12,12);  // 8 é o diametro maximo da estrela mais brilhante
		var image = new Surface(24,12);
		image.draw(eval('img_estrela0'+tempStar.brilho));
		umaEstrela.image = image;
 		umaEstrela.frame = 0;		
		umaEstrela.x = tempStar.declinacao  + offSetX;
		umaEstrela.y = tempStar.ascencaoReta  + offSetY;
		umaEstrela.opacity=1.0;		
		umaEstrela.nome = 'Estrela '+(i+1)+' de '+nome;
		umaEstrela.clicked = false;
		umaEstrela.dadosEstrela = tempStar;
		umaEstrela.ligado = false;
		umaEstrela.miniStar = ''; 
		umaEstrela.constelattion = nome; 
		
		if(minimap){
		  umaEstrela.visible = false;
		}else{
		   umaEstrela.scale(1.3,1.3);
    	   umaEstrela.addEventListener('touchend', function(e) {		   		   		   

    			if (estrelaAnterior == "")
    			   estrelaAnterior = e.target;
    			   
    			estrelaAtual = e.target;

		     // var lblEstrela = new Label(estrelaAtual.dadosEstrela.numero);
				// lblEstrela.color = "white";
				// lblEstrela.x = estrelaAtual.x+5;
				// lblEstrela.y = estrelaAtual.y+5;
				// scene.addChild(lblEstrela);
    			
    			//console.log("Atual ("+estrelaAtual.dadosEstrela.numero+") ligada com ("+estrelaAtual.dadosEstrela.ligadaCom+")");
    			//console.log("Anter ("+estrelaAnterior.dadosEstrela.numero+") ligada com ("+estrelaAnterior.dadosEstrela.ligadaCom+")");	
    			if (iPadOk && estrelaAtual.constelattion == estrelaAnterior.constelattion &&
    			    (estrelaAtual.dadosEstrela.ligadaCom == estrelaAnterior.dadosEstrela.numero || 
    			     estrelaAnterior.dadosEstrela.ligadaCom == estrelaAtual.dadosEstrela.numero)
    				)
    			{
					if(game.soundOn)
						sound_estrela.play();
		   
    			   ligar(estrelaAtual, estrelaAnterior);				
    			   estrelaAtual.ligado = true;
    			   estrelaAnterior.ligado = true;  
    			      			   			   
    			   estrelaAnterior.miniStar.visible = true;
    			   estrelaAtual.miniStar.visible = true;  
    			   ligar(estrelaAtual.miniStar, estrelaAnterior.miniStar);    			    			   
    			}
    			
    			estrelaAnterior.clicked = false; 
    			estrelaAnterior = estrelaAtual;
    			
    			e.target.clicked = true;			      	
            }); 
        }
        
        scene.addChild(umaEstrela);
		
		currentStars.push(umaEstrela);
		allStars.push(umaEstrela);
	}
	 
	
	return currentStars;
}

function connectConstelations(de, com){
   for(var i=0; i < de.length; i++)
        de[i].miniStar = com[i];        
}

